<style>
label {
    float: left;
    text-align: right;
    margin-right: 0.2em;
    width: 15em;
}
</style>

<h1 align="center">PayPal Payment Result</h1>
<h2 align="center">Payment Data Transfer</h2>

<div style="margin: 0 auto; width: 600px;" >
<% if @verify_data -%>
    <fieldset>
    <legend>Payer Information</legend><br />
    <label>first_name :</label><%= @verify_data["first_name"] %><br />
    <label>last_name :</label><%= @verify_data["last_name"] %><br />
    <label>residence_country :</label><%= @verify_data["residence_country"] %><br />
    <label>payer_email :</label><%= @verify_data["payer_email"] %><br />
    <label>pay_id :</label><%= @verify_data["payer_id"] %><br />
    <label>pay_status :</label><%= @verify_data["payer_status"] %><br />
    </fieldset>
    <br />

    <fieldset>
    <legend>Payment Information</legend><br />
    <label>payment_date :</label><%= @verify_data["payment_date"] %><br />
    <label>payment_fee :</label><%= @verify_data["payment_fee"] %><br />
    <label>payment_gross :</label><%= @verify_data["payment_gross"] %><br />
    <label>payment_status :</label><%= @verify_data["payment_status"] %><br />
    <label>payment_type :</label><%= @verify_data["payment_type"] %><br />
    <label>pending_reason :</label><%= @verify_data["pending_reason"] %><br />
    </fieldset>
    <br />

    <fieldset>
    <legend>Items Information</legend><br />
    <center>
    <table cellpadding="2" cellspacing="2" border="1">
    <tr>
      <td>Item #</td>
      <td>Name</td>
      <td>Handling</td>
      <td>Shipping</td>
      <td>Tax</td>
      <td>Qty</td>
      <td></td>
      <td>Gross</td>
    </tr>
    <% for i in 1..@verify_data["num_cart_items"].to_i %>
    <tr>
      <td><%= @verify_data["item_number#{i}"] %></td>
      <td><%= @verify_data["item_name#{i}"] %></td>
      <td><%= @verify_data["mc_handling#{i}"] %></td>
      <td><%= @verify_data["mc_shipping#{i}"] %></td>
      <td><%= @verify_data["mc_tax#{i}"] %> | <%= @verify_data["tax#{i}"] %>?</td>
      <td><%= @verify_data["quantity#{i}"] %></td>
      <td></td>
      <td><%= @verify_data["mc_gross_#{i}"] %></td>
    </tr>
    <% end %>
    <tr>
      <td></td>
      <td></td>
      <td><%= @verify_data["mc_handling"] %></td>
      <td><%= @verify_data["mc_shipping"] %></td>
      <td><%= @verify_data["tax"] %></td>
      <td></td>
      <td></td>
      <td></td>
    </tr>
    </table>
    </center>
    <label>num_cart_items :</label><%= @verify_data["num_cart_items"] %><br />
    <label>mc_currency :</label><%= @verify_data["mc_currency"] %><br />
    <label>mc_gross :</label><%= @verify_data["mc_gross"] %><br />
    <label>mc_fee :</label><%= @verify_data["mc_fee"] %><br /><br />
    </fieldset>
    <br />

    <fieldset>
    <legend>Address Information</legend><br />
    <label>address_name :</label><%= @verify_data["address_name"] %><br />
    <label>address_street :</label><%= @verify_data["address_street"] %><br />
    <label>address_state :</label><%= @verify_data["address_state"] %><br />
    <label>address_city :</label><%= @verify_data["address_city"] %><br />
    <label>address_zip :</label><%= @verify_data["address_zip"] %><br />
    <label>address_country_code :</label><%= @verify_data["address_country_code"] %><br />
    <label>address_country :</label><%= @verify_data["address_country"] %><br />
    <label>address_status :</label><%= @verify_data["address_status"] %><br />
    </fieldset>
    <br />

    <fieldset>
    <legend>Other Information</legend><br />
    <label>business :</label><%= @verify_data["business"] %><br />
    <label>charset :</label><%= @verify_data["charset"] %><br />
    <label>custom :</label><%= @verify_data["custom"] %><br />
    <label>invoice :</label><%= @verify_data["invoice"] %><br />
    <label>merchant_return_link :</label><%= @verify_data["merchant_return_link"] %>?<br />
    <label>notify_version :</label><%= @verify_data["notify_version"] %>?<br />
    <label>protection_eligibility :</label><%= @verify_data["protection_eligibility"] %><br />
    <label>receiver_email :</label><%= @verify_data["receiver_email"] %><br />
    <label>receiver_id :</label><%= @verify_data["receiver_id"] %><br />
    <label>test_ipn :</label><%= @verify_data["test_ipn"] %>?<br />
    <label>transaction_subject :</label><%= @verify_data["transaction_subject"] %><br />
    <label>txn_id :</label><%= @verify_data["txn_id"] %><br />
    <label>txn_type :</label><%= @verify_data["txn_type"] %><br />
    <label>verify_sign :</label><%= @verify_data["verify_sign"] %>?<br />
    </fieldset>
    <br /><br />
<% end -%>

<%= link_to "Home", {:controller =>"home", :action => "index"} %>
<br /><br />

<h2>Request Parameters</h2>
<% for k, v in params.sort -%>
  <label><%= "#{k} : " -%></label><%= "#{v}" -%><br />
<% end -%>
<br />

<% if @post_back_data -%>
<h2>Post Back Data</h2>
  <% for k, v in @post_back_data -%>
  <label><%= "#{k} : " -%></label><%= "#{v}" -%><br />
  <% end -%>
<br />
<% end -%>

<% if @verify_data -%>
<h2>PDT Results</h2>
  <% for k, v in @verify_data.sort -%>
  <label><%= "#{k} : " -%></label><%= "#{v}" -%><br />
  <% end -%>
<br />
<% end -%>

</div>

